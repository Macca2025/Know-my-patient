{% extends 'layouts/base.html.twig' %}
{% block content %}

<div class="d-flex flex-column min-vh-100 section-gradient-light">
	<main class="flex-grow-1 d-flex justify-content-center align-items-center py-5 main-content">
	<div class="login-card bg-white rounded-4 p-4 p-lg-5 mt-5 mb-4 border-0 login-card-width">
		<style>
		@media (max-width: 576px) {
			.login-card {
				padding-left: 1.25rem !important;
				padding-right: 1.25rem !important;
			}
		}
		@media (max-width: 400px) {
			.login-card {
				padding-left: 0.5rem !important;
				padding-right: 0.5rem !important;
			}
		}
		</style>
						<!-- Logo and Welcome Section -->
						<div class="text-center mb-4">
							<div class="login-logo-wrapper mb-4">
								<img src="{{ companyLogo|default('images/logo.png') }}" alt="{{ app_name|default('Know My Patient') }}" class="login-logo">
							</div>
							<h2 class="login-title fw-bold mb-3 text-purple-primary">Welcome Back</h2>
							{% if registered == '1' %}
								<div class="alert alert-success">Registration successful! Please log in.</div>
							{% endif %}
							{% if deleted == '1' %}
								<div class="alert alert-success">
									<i class="bi bi-check-circle me-2"></i>
									Your account has been deleted.</br> We're sorry to see you go.
								</div>
							{% endif %}
							<p class="login-subtitle text-muted">Sign in to access your patient dashboard</p>
						</div>


						{% if suspended %}
						<div class="alert alert-warning">
							<i class="bi bi-exclamation-triangle me-2"></i>
							Your account has been suspended.</br>Please <a href="{{ url_for('support')|default('#') }}" class="alert-link">contact support</a> for assistance.
						</div>
						{% endif %}

						{% if error %}
						<div class="alert alert-danger">{{ error }}</div>
						{% endif %}

						<form method="post" action="{{ url_for('login') }}" id="loginForm" class="login-form">
	{# CSRF token fields #}
	{% if csrf is defined %}
		<input type="hidden" name="{{ csrf.keys.name }}" value="{{ csrf.name }}">
		<input type="hidden" name="{{ csrf.keys.value }}" value="{{ csrf.value }}">
	{% endif %}
							<div class="form-group-modern mb-4">
								<label for="email" class="form-label-modern">Email Address</label>
								<div class="input-wrapper">
									<i class="bi bi-envelope input-icon"></i>
									<input type="email"
										   class="form-control-modern"
										   id="email"
										   name="email"
										   placeholder="Enter your email address"
										   value="{{ form.email|default('') }}"
										   required>
								</div>
							</div>

							<div class="form-group-modern mb-4">
								<label for="password" class="form-label-modern">Password</label>
								<div class="input-wrapper">
									<i class="bi bi-lock input-icon"></i>
									<input type="password"
										   class="form-control-modern"
										   id="password"
										   name="password"
										   placeholder="Enter your password"
										   required>
									<button class="btn-password-toggle" type="button" id="togglePassword">
										<i class="bi bi-eye" id="togglePasswordIcon"></i>
									</button>
								</div>
							</div>

							<!-- Remember Me and Forgot Password -->
							<div class="form-options mb-4 d-flex justify-content-between align-items-center">
								<div class="form-check">
									<input class="form-check-input" type="checkbox" id="remember" name="remember" {% if form.remember %}checked{% endif %}>
									<label class="form-check-label" for="remember">Remember Me</label>
								</div>
								<a href="{{ url_for('forgot_password')|default('#') }}" class="forgot-password-link">Forgot password?</a>
							</div>

							<div class="d-grid">
								<button type="submit" name="submit_login" value="1" class="btn-modern-outline-primary w-100 mb-4">
								<i class="bi bi-box-arrow-in-right me-2"></i>Sign In
								</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</main>
</div>
{% endblock %}