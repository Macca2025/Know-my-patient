PHPMailer Quick Reference Card
================================

SETUP CHECKLIST
--------------
☐ Update .env with SMTP credentials
☐ Run: php test_email.php your-email@example.com
☐ Check logs/app.log for any errors
☐ Update controllers to inject EmailService

GMAIL SETUP (Quick)
------------------
1. Go to https://myaccount.google.com/security
2. Enable 2-Step Verification
3. Generate App Password (Security > App passwords)
4. Update .env:
   SMTP_USERNAME=your-email@gmail.com
   SMTP_PASSWORD=xxxx-xxxx-xxxx-xxxx (16-char app password)

BASIC USAGE
----------
// Inject in constructor
use App\Application\Services\EmailService;

private EmailService $emailService;

public function __construct(EmailService $emailService) {
    $this->emailService = $emailService;
}

// Send email
$this->emailService->send(
    'user@example.com',
    'Subject',
    '<h1>HTML</h1>',
    'Plain text'
);

QUICK METHODS
------------
// Password reset
$emailService->sendPasswordReset($email, $name, $resetLink);

// Welcome email
$emailService->sendWelcomeEmail($email, $name);

// With attachment
$emailService->sendWithAttachment($email, $subject, $html, '/path/to/file');

// Bulk email
$emailService->sendBulk(['user1@ex.com', 'user2@ex.com'], $subject, $html);

// Test connection
$emailService->testConnection('your-email@example.com');

TROUBLESHOOTING
--------------
❌ Authentication failed
   → Check SMTP_USERNAME and SMTP_PASSWORD in .env
   → For Gmail: Use App Password, not regular password

❌ Connection timeout
   → Check SMTP_PORT (587 for TLS, 465 for SSL)
   → Verify firewall allows SMTP traffic

❌ Email not received
   → Check spam folder
   → Run test: php test_email.php your-email@example.com
   → Check logs/app.log

❌ SSL certificate error
   → Update server CA certificates
   → Check SMTP_HOST is correct

DEBUGGING
--------
Enable verbose SMTP debug in EmailService.php:
$this->mailer->SMTPDebug = 2; // Line ~69

Check logs:
tail -f logs/app.log

Test configuration:
php test_email.php your-email@example.com

FILES
-----
EmailService:    src/Application/Services/EmailService.php
Configuration:   .env
DI Container:    app/dependencies.php
Test Script:     test_email.php
Full Guide:      PHPMAILER_SETUP.md

SMTP PROVIDERS
-------------
Gmail:        smtp.gmail.com:587 (TLS)
Outlook:      smtp.office365.com:587 (TLS)
SendGrid:     smtp.sendgrid.net:587 (TLS)
Mailgun:      smtp.mailgun.org:587 (TLS)
AWS SES:      email-smtp.us-east-1.amazonaws.com:587
Mailtrap:     smtp.mailtrap.io:2525 (Testing)

SECURITY TIPS
------------
✓ Use App Passwords (not main password)
✓ Enable 2FA on email account
✓ Never commit .env file
✓ Use TLS encryption
✓ Validate email addresses
✓ Rate limit email sending
✓ Log all email operations

PRODUCTION READY?
----------------
☐ SMTP credentials configured in .env
☐ Test email sent successfully
☐ Error logging verified
☐ Welcome emails working
☐ Password reset emails working
☐ Email templates customized
☐ Domain authentication (SPF/DKIM/DMARC) configured
☐ Monitoring set up for failures

NEXT STEPS
---------
1. Update .env with real credentials
2. Test: php test_email.php your-email@example.com
3. Update PasswordResetController to use EmailService
4. Add welcome emails to registration
5. Create custom templates
6. Set up monitoring

Need help? Check PHPMAILER_SETUP.md for detailed documentation.
